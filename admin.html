<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin â€“ Lyko Lake Tycoon</title>
<style>
:root{
  --ceo:#ff3b30;
  --admin:#34c759;
  --bg:#0a4d4d;
  --accent:#22c5a4;
  --card-bg:rgba(255,255,255,0.05);
  --border:rgba(34,197,164,0.3);
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:linear-gradient(135deg,var(--bg) 0%,#1a6b6b 50%,#0f3d3d 100%);
  color:#fff;
  min-height:100vh;
  padding:20px;
}
nav{
  background:rgba(10,77,77,0.95);
  backdrop-filter:blur(10px);
  padding:20px 40px;
  border-radius:15px;
  margin-bottom:30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:2px solid var(--border);
}
.logo{
  font-size:1.8em;
  font-weight:bold;
  color:var(--accent);
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:10px;
}
h1{
  font-size:2.5em;
  margin:20px 0;
  background:linear-gradient(135deg,var(--accent) 0%,#4dd4b8 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}
.tabs{
  display:flex;
  gap:10px;
  margin-bottom:30px;
}
.tab{
  background:var(--card-bg);
  border:2px solid var(--border);
  color:rgba(255,255,255,0.7);
  padding:12px 24px;
  border-radius:12px;
  cursor:pointer;
  transition:all .3s ease;
}
.tab.active{
  background:var(--accent);
  color:#0a4d4d;
  border-color:var(--accent);
}
.content-section{
  background:var(--card-bg);
  border:2px solid var(--border);
  border-radius:15px;
  padding:30px;
}
.user-card{
  background:rgba(255,255,255,0.03);
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.admin-action{
  background:var(--admin);
  color:#000;
  padding:8px 16px;
  border-radius:8px;
  cursor:pointer;
}
.ceo-action{
  background:var(--ceo);
  color:#fff;
}
.beta-tag{color:#ffcc00;font-size:0.8em}
</style>
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getFirestore, collection, getDocs, doc, updateDoc, deleteDoc, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
        apiKey: "AIzaSyDUBeWvs6kOijqST6FVGirWs2EZ12aAAwU",
        authDomain: "lyko-lake.firebaseapp.com",
        projectId: "lyko-lake",
        storageBucket: "lyko-lake.firebasestorage.app",
        messagingSenderId: "685592614306",
        appId: "1:685592614306:web:b6a8f6f18407f9c0154efb"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, user => {
        if (!user || !user.emailVerified) window.location.href = '/auth.html';
    });

    async function loadUsers() {
        const users = await getDocs(collection(db, 'users'));
        const list = document.getElementById('userList');
        list.innerHTML = '';
        users.forEach(userDoc => {
            const data = userDoc.data();
            list.innerHTML += `<div class="user-card">
                <span>${data.username} - Level: ${data.level} - Money: $${data.money}</span>
                <div>
                    <button class="admin-action" onclick="adjustMoney('${userDoc.id}', 1000)">+ $1000</button>
                    <button class="ceo-action" onclick="banUser('${userDoc.id}')">Ban</button>
                </div>
            </div>`;
        });
    }

    window.adjustMoney = async (userId, amount) => {
        const userRef = doc(db, 'users', userId);
        const snap = await getDoc(userRef);
        const currentMoney = snap.data().money || 0;
        await updateDoc(userRef, { money: currentMoney + amount });
        loadUsers();
    };

    window.banUser = async (userId) => {
        if (confirm('Ban this user?')) {
            await addDoc(collection(db, 'bans'), { userId, reason: 'Admin ban', createdAt: serverTimestamp() });
            loadUsers();
        }
    };

    loadUsers();
</script>
</head>
<body>
    <nav>
        <a href="/" class="logo">Lyko Lake Tycoon <span class="beta-tag">BETA</span></a>
    </nav>
    <h1>Admin Panel <span class="beta-tag">BETA</span></h1>
    <div class="tabs">
        <div class="tab active">Users</div>
    </div>
    <div class="content-section">
        <h2>Manage Users</h2>
        <div id="userList"></div>
    </div>
</body>
</html>
